<!DOCTYPE html>
<html>
<head>
    <title>Disarm the BOM (Browser Object Model)</title>
    <style type="text/css">
        #timer {
            font-size: 250px;
            color: red;

            position: fixed;
            right: 50px;
            top: 10px;
        }
    </style>
</head>
<body>
    <h1>Mission Impossible!</h1>
    
    <div id='timer'></div>
    
    <button id='btnDefuse'>Defuse the BOM!</button>
    
    <script>
    // Initialize some variables.  You don't have to change these.
    var count = 1;
    var maxCount = 10;
    var detonationTimer = 10; // seconds
    // var timer = null;

    // TODO: Create a variable to represent your setInterval timer,
    //       which will have a one second interval. It should use
    //       the following function
     var intervalId = setInterval(function () {

    
        // TODO: Decrement detonationTimer by one each interval.
        detonationTimer--;

        // TODO: Update the timer div with the new value

        document.getElementById('timer').innerHTML = detonationTimer;

        // TODO: Console log the current remaining time.

        console.log('You have ' + detonationTimer + ' seconds left.');

        // TODO: Explode the BOM with an alert if the timer runs out.
        // TODO: Clear the interval afterwards.

        if (detonationTimer == 0) {
            console.log('The BOM went boom!');
            clearInterval(intervalId);
        }
}, 1000);

    // TODO: Create a variable whose value is the btnDefuse element.

    var buttonDefuseId = document.getElementById('btnDefuse');
    
    // TODO: Attach an event listener to that variable, which runs this function when clicked.
    buttonDefuseId.addEventListener('click', function() {
    
        // TODO: Generate the random value for the margin-top css property
        var randTop = Math.floor(Math.random() * (300 + 1) + 1);

        // TODO: Generate the random value for the margin-left css property
        var randLeft = Math.floor(Math.random() * (500 + 1) + 1);


        // TODO: If the count is equal or greater than maxCount
        if (count >= maxCount) {
            // TODO: Clear the interval.
            clearInterval(intervalId);
            // TODO: Alert "You are a hero! You disarmed the BOM!"
            alert('You are a hero! You disarmed the BOM!');

            var remover = function(event) {        
            buttonDefuseId.addEventListener('click');
            console.log('event listener removed');
        }

            } else {
            // TODO: Assign the random margin top to the button
            document.getElementById('btnDefuse').style.marginTop = randTop + 'px';
            
            // TODO: Assign the random margin left to the button
            document.getElementById('btnDefuse').style.marginLeft = randLeft + 'px';
            
            // TODO: Increment the count by one
            count++;
            console.log(count, randTop, randLeft);
        }
    });
    
    </script>
</body>
</html>